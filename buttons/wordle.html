<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Wordle Embed</title>

<style>
/* =========================
   ORIGINAL VARIABLES
   ========================= */
:root{
  --bg:#0b1220; --card:#0f1724; --text:#e6eef8;
  --absent:#3a3a3c; --present:#b59f3b; --correct:#538d4e;
  --key:#818384; --key-pressed:#565758;
  --ease-posh:cubic-bezier(.22,1,.36,1);
  font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;background:radial-gradient(circle at top,#0b1228,#020617);color:var(--text);overflow:hidden}

/* =========================
   LAYOUT (UNCHANGED)
   ========================= */
.wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  height:100%;
  padding:10px;
  perspective:1200px;
}

.board{
  display:grid;
  grid-template-rows:repeat(6,64px);
  gap:6px;
  width:100%;
  max-width:400px;
  transform-style:preserve-3d;
}

.row{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:6px;
  transform-style:preserve-3d;
}

/* =========================
   TILE â€” CINEMATIC
   ========================= */
.tile{
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:700;
  font-size:24px;
  border-radius:6px;
  background:#121826;
  transform-style:preserve-3d;
  box-shadow:0 8px 24px rgba(0,0,0,.4);
  transition:
    transform .35s var(--ease-posh),
    box-shadow .35s var(--ease-posh),
    background-color .35s var(--ease-posh);
}

.tile.spawn{
  animation:spawn .6s var(--ease-posh) both;
}

@keyframes spawn{
  from{opacity:0;transform:translateZ(-180px) scale(.4)}
  to{opacity:1;transform:translateZ(0) scale(1)}
}

.tile.filled{
  box-shadow:0 0 18px rgba(255,255,255,.25);
}

.row.commit{
  animation:cameraTilt .45s var(--ease-posh);
}

@keyframes cameraTilt{
  to{transform:rotateX(-10deg)}
}

.tile.reveal{
  animation:flip .7s var(--ease-posh) both;
}

@keyframes flip{
  0%{transform:rotateX(0)}
  45%{transform:rotateX(90deg);background:#121826}
  55%{transform:rotateX(90deg)}
  100%{transform:rotateX(0)}
}

.tile.correct{
  background:radial-gradient(circle at top,#34d399,#166534);
  box-shadow:0 0 36px rgba(34,197,94,.8);
}

.tile.present{
  background:radial-gradient(circle at top,#facc15,#a16207);
  box-shadow:0 0 26px rgba(234,179,8,.6);
}

.tile.absent{
  background:#1f2937;
}

/* =========================
   KEYBOARD (UNCHANGED + FEEL)
   ========================= */
.keyboard{display:flex;flex-direction:column;gap:6px;margin-top:10px;width:100%;max-width:400px}
.krow{display:flex;gap:4px;justify-content:center}
.key{
  flex:1;padding:10px 0;border-radius:6px;text-align:center;
  background:var(--key);color:#fff;font-weight:700;
  cursor:pointer;user-select:none;
  transition:transform .12s ease, background-color .3s var(--ease-posh);
}
.key:active{transform:scale(.95)}
.key.wide{flex:1.5}
.key.enter{background:var(--correct)}
.key.back{background:#b91c1c}

.hint{margin-top:6px;color:#9fb7db}

/* =========================
   OVERLAY â€” CINEMATIC EXIT
   ========================= */
.overlay{
  position:fixed;inset:0;
  background:linear-gradient(180deg,#0b1220,#111a2d);
  display:flex;align-items:center;justify-content:center;
  z-index:30;
}
.overlay.hide{
  animation:curtainUp .8s var(--ease-posh) forwards;
}
@keyframes curtainUp{
  to{opacity:0;transform:translateY(-60px);pointer-events:none}
}

.overlayContent{
  background:var(--card);
  padding:60px 40px;
  border-radius:30px;
  text-align:center;
  box-shadow:0 0 40px rgba(0,0,0,.6);
}

/* =========================
   SCORECARD (UNCHANGED + ENTRY)
   ========================= */
.scorecard{
  position:absolute;
  top:50%;left:50%;
  transform:translate(-50%,-50%);
  background:var(--card);
  padding:40px 60px;
  border-radius:20px;
  display:none;
  text-align:center;
  animation:scoreIn .6s var(--ease-posh);
}

@keyframes scoreIn{
  from{opacity:0;transform:translate(-50%,-50%) scale(.9)}
  to{opacity:1;transform:translate(-50%,-50%) scale(1)}
}

.wrap.defeat{
  filter:grayscale(.35) brightness(.9);
}
</style>
</head>

<body>

<!-- OVERLAY (UNCHANGED CONTENT) -->
<div id="introOverlay" class="overlay">
  <div class="overlayContent">
    <h1>ðŸŽ¯ How to Play Wordle</h1>
    <p>Guess the <strong>5-letter word</strong> in <strong>6 tries</strong>.</p>
    <button id="startBtn">ðŸš€ Start Game</button>
  </div>
</div>

<div class="wrap">
  <div id="board" class="board"></div>
  <div id="keyboard" class="keyboard"></div>
  <div id="hint" class="hint"></div>

  <div id="scorecard" class="scorecard">
    <h1 id="scoreTitle"></h1>
    <p id="scoreMsg"></p>
    <input id="playerName" placeholder="Enter your name" />
    <button id="shareBtn">Share</button>
  </div>
</div>

<script>
/* =========================
   YOUR ORIGINAL JS
   (only tiny class additions)
   ========================= */

const CSV_URL='https://docs.google.com/spreadsheets/d/e/2PACX-1vQ5Z6lmXH4jxHYMKUcimj_M-IV1pwtBUF72YKJIi_BO-KD_NYwWBJBQqni7m4NmQyU9NMdve4vGZ7rh/pub?output=csv';

let WORDS=[],ANSWER='',guesses=[],current='',MAX_GUESSES=6;

const boardEl=document.getElementById('board');
const keyboardEl=document.getElementById('keyboard');
const hintEl=document.getElementById('hint');
const introOverlay=document.getElementById('introOverlay');

document.getElementById('startBtn').onclick=()=>{
  introOverlay.classList.add('hide');
  document.addEventListener('keydown',keydownHandler);
};

function parseCSV(t){
  return t.split(/\r?\n/).map(l=>l.trim().toLowerCase()).filter(w=>/^[a-z]{5}$/.test(w));
}

function createBoard(){
  boardEl.innerHTML='';
  for(let r=0;r<6;r++){
    const row=document.createElement('div');
    row.className='row';
    for(let c=0;c<5;c++){
      const t=document.createElement('div');
      t.className='tile spawn';
      row.appendChild(t);
    }
    boardEl.appendChild(row);
  }
}

function renderKeyboard(){
  keyboardEl.innerHTML='';
  ['qwertyuiop','asdfghjkl','zxcvbnm'].forEach(str=>{
    const r=document.createElement('div');r.className='krow';
    for(const ch of str){
      const k=document.createElement('div');
      k.className='key';k.textContent=ch;
      k.onclick=()=>onKey(ch);
      r.appendChild(k);
    }
    if(str==='asdfghjkl'){
      const b=document.createElement('div');
      b.className='key wide back';b.textContent='âŒ«';
      b.onclick=()=>onKey('Backspace');
      r.appendChild(b);
    }
    if(str==='zxcvbnm'){
      const e=document.createElement('div');
      e.className='key wide enter';e.textContent='Enter';
      e.onclick=()=>onKey('Enter');
      r.appendChild(e);
    }
    keyboardEl.appendChild(r);
  });
}

function updateBoard(){
  const row=boardEl.children[guesses.length];
  for(let i=0;i<5;i++){
    const t=row.children[i];
    t.textContent=current[i]||'';
    t.className='tile';
    if(current[i]) t.classList.add('filled');
  }
}

function onKey(k){
  if(k==='Enter')submit();
  else if(k==='Backspace'){current=current.slice(0,-1);updateBoard();}
  else if(/^[a-z]$/i.test(k)&&current.length<5){
    current+=k.toLowerCase();updateBoard();
  }
}

function submit(){
  if(current.length!==5||!WORDS.includes(current))return;
  evaluate(current);current='';
}

function evaluate(guess){
  const row=boardEl.children[guesses.length];
  row.classList.add('commit');

  const a=[...ANSWER],g=[...guess];
  const freq={};a.forEach(c=>freq[c]=(freq[c]||0)+1);
  const res=Array(5).fill('absent');

  for(let i=0;i<5;i++)if(g[i]===a[i]){res[i]='correct';freq[g[i]]--;}
  for(let i=0;i<5;i++)if(res[i]==='absent'&&freq[g[i]]>0){res[i]='present';freq[g[i]]--;}

  for(let i=0;i<5;i++){
    setTimeout(()=>{
      const t=row.children[i];
      t.textContent=g[i];
      t.classList.add('reveal',res[i]);
    },i*180);
  }

  guesses.push(guess);
  if(guess===ANSWER||guesses.length===MAX_GUESSES)showScore(guess===ANSWER);
}

function showScore(win){
  const sc=document.getElementById('scorecard');
  sc.style.display='block';
  if(!win)document.querySelector('.wrap').classList.add('defeat');
  document.getElementById('scoreTitle').textContent=win?'ðŸŽ‰ Brilliant':'ðŸ’” Hard Luck';
  document.getElementById('scoreMsg').textContent=ANSWER.toUpperCase();
}

function keydownHandler(e){onKey(e.key)}

async function init(){
  const r=await fetch(CSV_URL);
  WORDS=parseCSV(await r.text());
  ANSWER=WORDS[new Date().getDay()%WORDS.length];
  createBoard();renderKeyboard();
}
init();
</script>

</body>
</html>